<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f043ce3ff6d16d461758.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}*,:after,:before{box-sizing:border-box}html{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-size:1rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:Noto Sans KR,Roboto,Open Sans,Microsoft YaHei,sans-serif}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 2.13.23"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/notosanskr/v12/Pby7FmXiEBPT4ITbgNA5CgmOalv477IR.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/notosanskr/v12/Pby7FmXiEBPT4ITbgNA5CgmOelz477IR.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/notosanskr/v12/PbykFmXiEBPT4ITbgNA5CgmG0X7t.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/sourcecodepro/v11/HI_SiYsKILxRpg3hIP6sJ7fM7PqlPevW.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/sourcecodepro/v11/HI_XiYsKILxRpg3hIP6sJ7fM7Pqt4s_Ds-cq.woff2"/><style type="text/css">@font-face{font-family:'Noto Sans KR';font-style:normal;font-weight:300;src:local('Noto Sans KR Light'),local('NotoSansKR-Light'),url(/google-fonts/s/notosanskr/v12/Pby7FmXiEBPT4ITbgNA5CgmOelz477IR.woff2) format('woff2'),url(/google-fonts/s/notosanskr/v12/Pby7FmXiEBPT4ITbgNA5CgmOelz477IX.woff) format('woff');font-display: swap;}@font-face{font-family:'Noto Sans KR';font-style:normal;font-weight:400;src:local('Noto Sans KR Regular'),local('NotoSansKR-Regular'),url(/google-fonts/s/notosanskr/v12/PbykFmXiEBPT4ITbgNA5CgmG0X7t.woff2) format('woff2'),url(/google-fonts/s/notosanskr/v12/PbykFmXiEBPT4ITbgNA5CgmG0X7r.woff) format('woff');font-display: swap;}@font-face{font-family:'Noto Sans KR';font-style:normal;font-weight:700;src:local('Noto Sans KR Bold'),local('NotoSansKR-Bold'),url(/google-fonts/s/notosanskr/v12/Pby7FmXiEBPT4ITbgNA5CgmOalv477IR.woff2) format('woff2'),url(/google-fonts/s/notosanskr/v12/Pby7FmXiEBPT4ITbgNA5CgmOalv477IX.woff) format('woff');font-display: swap;}@font-face{font-family:'Source Code Pro';font-style:normal;font-weight:400;src:local('Source Code Pro Regular'),local('SourceCodePro-Regular'),url(/google-fonts/s/sourcecodepro/v11/HI_SiYsKILxRpg3hIP6sJ7fM7PqlPevW.woff2) format('woff2'),url(/google-fonts/s/sourcecodepro/v11/HI_SiYsKILxRpg3hIP6sJ7fM7PqlPevQ.woff) format('woff');font-display: swap;}@font-face{font-family:'Source Code Pro';font-style:normal;font-weight:600;src:local('Source Code Pro SemiBold'),local('SourceCodePro-SemiBold'),url(/google-fonts/s/sourcecodepro/v11/HI_XiYsKILxRpg3hIP6sJ7fM7Pqt4s_Ds-cq.woff2) format('woff2'),url(/google-fonts/s/sourcecodepro/v11/HI_XiYsKILxRpg3hIP6sJ7fM7Pqt4s_Ds-cs.woff) format('woff');font-display: swap;}</style><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/static/icons/android-icon-48x48.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><link rel="manifest" href="/manifest_ko.webmanifest"/><meta name="theme-color" content="#ffffff"/><link rel="apple-touch-icon" sizes="48x48" href="/static/icons/android-icon-48x48.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><link rel="apple-touch-icon" sizes="72x72" href="/static/icons/android-icon-72x72.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><link rel="apple-touch-icon" sizes="96x96" href="/static/icons/android-icon-96x96.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><link rel="apple-touch-icon" sizes="144x144" href="/static/icons/android-icon-144x144.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><link rel="apple-touch-icon" sizes="192x192" href="/static/icons/android-icon-192x192.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><link rel="apple-touch-icon" sizes="256x256" href="/static/icons/android-icon-256x256.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><link rel="apple-touch-icon" sizes="384x384" href="/static/icons/android-icon-384x384.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><link rel="apple-touch-icon" sizes="512x512" href="/static/icons/android-icon-512x512.png?v=0b4863c7cf94a1fa5f384a6b9a3b9af7"/><title data-react-helmet="true">Monorepo with typescript (1) | 클래스101 기술 블로그</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x26.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="57x57" href="/icons/apple-icon-57x57.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="60x60" href="/icons/apple-icon-60x60.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="72x72" href="/icons/apple-icon-72x72.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/icons/apple-icon-76x76.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="114x114" href="/icons/apple-icon-114x114.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/icons/apple-icon-120x120.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="144x144" href="/icons/apple-icon-144x144.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/icons/apple-icon-152x152.png"/><link data-react-helmet="true" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/icons/apple-icon-180x180.png"/><link data-react-helmet="true" rel="shortcut icon" type="ico" href="/icons/favicon.ico"/><meta data-react-helmet="true" name="description" content=" Jump to Monorepo 편집자 주
‘Monorepo’는 독자의 가독성을 높이기 위해 글의 제목을 제외한 본문 전체에서 ‘모노레포’로 한글 표기함. 이는 외래어 표기법 상 관용에 해당함. Overview 이번 글에서는 모노레포를 도입한 계기와 장・단점, Git history를 보존한 채 레포지토리를 합치는 방법을 다루겠습니다. 모노레포의 이해 모노레포는 두 개 이상의 프로젝트 코드를 하나의 레포지토리에서 관리하는 기법입니다.1 페이스북이나 구글, 마이크로소프트 등 대형 소프트웨어 기업에서도 사용되고 있고, 일부 인기 있는 오…"/><meta data-react-helmet="true" name="author" content="토니"/><meta data-react-helmet="true" property="og:title" content="Monorepo with typescript (1)"/><meta data-react-helmet="true" property="og:url" content="https://class101.dev/"/><meta data-react-helmet="true" property="og:image" content="https://class101.dev/images/thumbnails/monorepo.png"/><meta data-react-helmet="true" property="og:image:width" content="1600"/><meta data-react-helmet="true" property="og:image:height" content="900"/><meta data-react-helmet="true" property="og:description" content=" Jump to Monorepo 편집자 주
‘Monorepo’는 독자의 가독성을 높이기 위해 글의 제목을 제외한 본문 전체에서 ‘모노레포’로 한글 표기함. 이는 외래어 표기법 상 관용에 해당함. Overview 이번 글에서는 모노레포를 도입한 계기와 장・단점, Git history를 보존한 채 레포지토리를 합치는 방법을 다루겠습니다. 모노레포의 이해 모노레포는 두 개 이상의 프로젝트 코드를 하나의 레포지토리에서 관리하는 기법입니다.1 페이스북이나 구글, 마이크로소프트 등 대형 소프트웨어 기업에서도 사용되고 있고, 일부 인기 있는 오…"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:site_name" content="클래스101 기술 블로그"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="토니"/><meta data-react-helmet="true" name="twitter:title" content="Monorepo with typescript (1)"/><meta data-react-helmet="true" name="twitter:description" content=" Jump to Monorepo 편집자 주
‘Monorepo’는 독자의 가독성을 높이기 위해 글의 제목을 제외한 본문 전체에서 ‘모노레포’로 한글 표기함. 이는 외래어 표기법 상 관용에 해당함. Overview 이번 글에서는 모노레포를 도입한 계기와 장・단점, Git history를 보존한 채 레포지토리를 합치는 방법을 다루겠습니다. 모노레포의 이해 모노레포는 두 개 이상의 프로젝트 코드를 하나의 레포지토리에서 관리하는 기법입니다.1 페이스북이나 구글, 마이크로소프트 등 대형 소프트웨어 기업에서도 사용되고 있고, 일부 인기 있는 오…"/><meta data-react-helmet="true" name="twitter:label1" content="Written By"/><meta data-react-helmet="true" name="twiiter:data1" content="토니"/><meta data-react-helmet="true" name="keywords" content="class101, typescript, monorepo, react, graphql, apllo, aws"/><meta data-react-helmet="true" name="fb:app_id" content="2582489538450547"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#ffffff"/><meta data-react-helmet="true" name="msapplication-TileImage" content="/icons/ms-icon-144x144.png"/><meta data-react-helmet="true" name="theme-color" content="#ffffff"/><style data-styled="jGmALK jltglz kUFcze bwAdMP DNFnA iBrsbu fRkQwK fIzunj chJCBg UMvQk btnDQV jVcMoj kGlFEZ bFOsCX dHnwaE fVbhVU bdPnbg gUlJEp jdkpkB hBKkTB dWSCZy ceeZup gEKJQZ lhRAoc dBDefs hMWwcz fpURgw iDegNP lcDDZr fsJRzA jSkpUy wZbtm ckhzBz fGQKSY egeTSP NxmbO lCGJW cICPMT" data-styled-version="4.3.2">
/* sc-component-id: sc-bdVaJa */
.hBKkTB{font-size:14px;font-weight:normal;color:#3e4042;line-height:20px;-webkit-letter-spacing:-0.2px;-moz-letter-spacing:-0.2px;-ms-letter-spacing:-0.2px;letter-spacing:-0.2px;margin:0;margin:0;}
/* sc-component-id: sc-bsbRJL */
.DNFnA{position:relative;min-height:1px;padding-right:12px;padding-left:12px;box-sizing:border-box;} @media (max-width:1023px){.DNFnA{width:100%;padding-right:4px;padding-left:4px;}} @media{.DNFnA{width:100%;}} @media (min-width:1024px){.DNFnA{width:100%;}}
/* sc-component-id: sc-hZSUBg */
.bwAdMP{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-content:stretch;-ms-flex-line-pack:stretch;align-content:stretch;margin-right:-12px;margin-left:-12px;} @media (max-width:1023px){.bwAdMP{margin-right:-4px;margin-left:-4px;}}
/* sc-component-id: sc-cMhqgX */
.kUFcze{position:relative;margin-left:auto;margin-right:auto;} @media (max-width:1023px){.kUFcze{margin-left:24px;margin-right:24px;}} @media (min-width:1024px){.kUFcze{max-width:960px;}}
/* sc-component-id: Bio__BioContainer-sc-155qmyt-0 */
.iDegNP{margin:32px 0;display:block;background:white;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-text-decoration:none;text-decoration:none;} .iDegNP:hover{color:inherit;}
/* sc-component-id: Bio__BioImage-sc-155qmyt-1 */
.lcDDZr{width:100px;height:100px;border-radius:50%;margin-right:32px;object-fit:cover;} @media (max-width:425px){.lcDDZr{width:100px;height:100px;margin-right:16px;}}
/* sc-component-id: Bio__Username-sc-155qmyt-3 */
.jSkpUy{font-size:20px;font-weight:bold;color:#3e4042;line-height:28px;-webkit-letter-spacing:-0.3px;-moz-letter-spacing:-0.3px;-ms-letter-spacing:-0.3px;letter-spacing:-0.3px;margin:0;display:block;-webkit-text-decoration:none;text-decoration:none;margin-bottom:4px;} .jSkpUy:hover{-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: Bio__SocialIcon-sc-155qmyt-4 */
.wZbtm img{margin:8px 4px 0px 0px;width:24px;}
/* sc-component-id: Comments__CommentsContainer-sc-1631qqa-0 */
.ckhzBz{margin:32px auto;}
/* sc-component-id: Img__ImageContainer-sc-1rnm859-0 */
.hMWwcz{display:block;position:relative;overflow:hidden;background:rgba(0,0,0,0.2);padding-top:56.25%;}
/* sc-component-id: Img__Image-sc-1rnm859-1 */
.fpURgw{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;border-radius:3px;}
/* sc-component-id: Footer__Container-sc-1vg27dx-0 */
.fGQKSY{background-color:#edeff0;padding-top:32px;} .fGQKSY a{color:inherit;font-weight:600;color:#1b1c1d;-webkit-text-decoration:none;text-decoration:none;} .fGQKSY a:hover{color:inherit;-webkit-text-decoration:underline;text-decoration:underline;} .fGQKSY p{padding:0;margin:4px 0;}
/* sc-component-id: Footer__LogoIcon-sc-1vg27dx-1 */
.egeTSP{width:auto;height:40px;margin:0;}
/* sc-component-id: Footer__DownloadIcon-sc-1vg27dx-2 */
.cICPMT{width:120px;margin-right:16px;}
/* sc-component-id: Footer__ContactSection-sc-1vg27dx-3 */
.NxmbO{font-size:16px;font-weight:normal;color:#3e4042;line-height:24px;-webkit-letter-spacing:-0.2px;-moz-letter-spacing:-0.2px;-ms-letter-spacing:-0.2px;letter-spacing:-0.2px;margin:0;}
/* sc-component-id: Footer__ContactArticle-sc-1vg27dx-4 */
.lCGJW{padding:16px 0;}
/* sc-component-id: SearchInput__AutoCompleteContainer-sc-1d7gc1p-0 */
.chJCBg{border:1px solid #dde0e2;box-sizing:border-box;margin:0 16px;padding:8px 0;position:relative;background:white;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}
/* sc-component-id: SearchInput__StyledInput-sc-1d7gc1p-3 */
.UMvQk{font-size:14px;font-weight:normal;color:#3e4042;line-height:20px;-webkit-letter-spacing:-0.2px;-moz-letter-spacing:-0.2px;-ms-letter-spacing:-0.2px;letter-spacing:-0.2px;margin:0;width:100%;padding:0 16px;outline:none;border:none;}
/* sc-component-id: Header__NavConatiner-sc-938f43-0 */
.jltglz{padding:16px 0px;}
/* sc-component-id: Header__NavInnerContainer-sc-938f43-1 */
.iBrsbu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
/* sc-component-id: Header__LogoIcon-sc-938f43-2 */
.fIzunj{display:block;height:40px;width:auto;margin:0;}
/* sc-component-id: Header__NoHoverLink-sc-938f43-3 */
.fRkQwK{box-shadow:none;} .fRkQwK:hover{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: Header__MenuContainer-sc-938f43-4 */
.btnDQV{position:relative;cursor:pointer;}
/* sc-component-id: Layout__Main-sc-50n0nv-1 */
.jVcMoj{padding:32px 0;}
/* sc-component-id: LinkTag__StyledLink-o5p4f2-0 */
.bdPnbg{-webkit-text-decoration:none;text-decoration:none;color:#3e4042;background:#edeff0;font-size:16px;padding:4px 8px;border-radius:3px;display:inline-block;margin:8px;} .bdPnbg:hover{color:#FFF;background:#fd7e14;}
/* sc-component-id: ShareButtons__Wrapper-sc-6atok7-0 */
.dHnwaE{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: ShareButtons__ButtonWrapper-sc-6atok7-1 */
.fVbhVU{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:4px;cursor:pointer;}
/* sc-component-id: post__PostContainer-sc-1sfv28x-0 */
.kGlFEZ{background:white;border-radius:3px;margin:0 auto;} .kGlFEZ .markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom;} .kGlFEZ .markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px;} .kGlFEZ .markdown-body .anchor:focus{outline:none;} .kGlFEZ .markdown-body h1 .octicon-link,.kGlFEZ .markdown-body h2 .octicon-link,.kGlFEZ .markdown-body h3 .octicon-link,.kGlFEZ .markdown-body h4 .octicon-link,.kGlFEZ .markdown-body h5 .octicon-link,.kGlFEZ .markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden;} .kGlFEZ .markdown-body h1:hover .anchor,.kGlFEZ .markdown-body h2:hover .anchor,.kGlFEZ .markdown-body h3:hover .anchor,.kGlFEZ .markdown-body h4:hover .anchor,.kGlFEZ .markdown-body h5:hover .anchor,.kGlFEZ .markdown-body h6:hover .anchor{-webkit-text-decoration:none;text-decoration:none;} .kGlFEZ .markdown-body h1:hover .anchor .octicon-link,.kGlFEZ .markdown-body h2:hover .anchor .octicon-link,.kGlFEZ .markdown-body h3:hover .anchor .octicon-link,.kGlFEZ .markdown-body h4:hover .anchor .octicon-link,.kGlFEZ .markdown-body h5:hover .anchor .octicon-link,.kGlFEZ .markdown-body h6:hover .anchor .octicon-link{visibility:visible;} .kGlFEZ .markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;line-height:1.5;font-size:16px;line-height:1.5;word-wrap:break-word;} .kGlFEZ .markdown-body .pl-c{color:#6a737d;} .kGlFEZ .markdown-body .pl-c1,.kGlFEZ .markdown-body .pl-s .pl-v{color:#005cc5;} .kGlFEZ .markdown-body .pl-e,.kGlFEZ .markdown-body .pl-en{color:#6f42c1;} .kGlFEZ .markdown-body .pl-s .pl-s1,.kGlFEZ .markdown-body .pl-smi{color:#24292e;} .kGlFEZ .markdown-body .pl-ent{color:#22863a;} .kGlFEZ .markdown-body .pl-k{color:#d73a49;} .kGlFEZ .markdown-body .pl-pds,.kGlFEZ .markdown-body .pl-s,.kGlFEZ .markdown-body .pl-s .pl-pse .pl-s1,.kGlFEZ .markdown-body .pl-sr,.kGlFEZ .markdown-body .pl-sr .pl-cce,.kGlFEZ .markdown-body .pl-sr .pl-sra,.kGlFEZ .markdown-body .pl-sr .pl-sre{color:#032f62;} .kGlFEZ .markdown-body .pl-smw,.kGlFEZ .markdown-body .pl-v{color:#e36209;} .kGlFEZ .markdown-body .pl-bu{color:#b31d28;} .kGlFEZ .markdown-body .pl-ii{background-color:#b31d28;color:#fafbfc;} .kGlFEZ .markdown-body .pl-c2{background-color:#d73a49;color:#fafbfc;} .kGlFEZ .markdown-body .pl-c2:before{content:'^M';} .kGlFEZ .markdown-body .pl-sr .pl-cce{color:#22863a;font-weight:700;} .kGlFEZ .markdown-body .pl-ml{color:#735c0f;} .kGlFEZ .markdown-body .pl-mh,.kGlFEZ .markdown-body .pl-mh .pl-en,.kGlFEZ .markdown-body .pl-ms{color:#005cc5;font-weight:700;} .kGlFEZ .markdown-body .pl-mi{color:#24292e;font-style:italic;} .kGlFEZ .markdown-body .pl-mb{color:#24292e;font-weight:700;} .kGlFEZ .markdown-body .pl-md{background-color:#ffeef0;color:#b31d28;} .kGlFEZ .markdown-body .pl-mi1{background-color:#f0fff4;color:#22863a;} .kGlFEZ .markdown-body .pl-mc{background-color:#ffebda;color:#e36209;} .kGlFEZ .markdown-body .pl-mi2{background-color:#005cc5;color:#f6f8fa;} .kGlFEZ .markdown-body .pl-mdr{color:#6f42c1;font-weight:700;} .kGlFEZ .markdown-body .pl-ba{color:#586069;} .kGlFEZ .markdown-body .pl-sg{color:#959da5;} .kGlFEZ .markdown-body .pl-corl{color:#032f62;-webkit-text-decoration:underline;text-decoration:underline;} .kGlFEZ .markdown-body details{display:block;} .kGlFEZ .markdown-body summary{display:list-item;} .kGlFEZ .markdown-body a{background-color:transparent;} .kGlFEZ .markdown-body a:active,.kGlFEZ .markdown-body a:hover{outline-width:0;} .kGlFEZ .markdown-body strong{font-weight:inherit;font-weight:bolder;} .kGlFEZ .markdown-body h1{font-size:2em;margin:0.67em 0;} .kGlFEZ .markdown-body img{border-style:none;} .kGlFEZ .markdown-body code,.kGlFEZ .markdown-body kbd,.kGlFEZ .markdown-body pre{font-family:'Source Code Pro','Noto Sans KR',monospace;font-size:1em;} .kGlFEZ .markdown-body hr{box-sizing:content-box;height:0;overflow:visible;} .kGlFEZ .markdown-body input{font:inherit;margin:0;} .kGlFEZ .markdown-body input{overflow:visible;} .kGlFEZ .markdown-body [type='checkbox']{box-sizing:border-box;padding:0;} .kGlFEZ .markdown-body *{box-sizing:border-box;} .kGlFEZ .markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit;} .kGlFEZ .markdown-body a{color:#0366d6;-webkit-text-decoration:none;text-decoration:none;} .kGlFEZ .markdown-body a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .kGlFEZ .markdown-body strong{font-weight:600;} .kGlFEZ .markdown-body hr{background:transparent;border:0;border-bottom:1px solid #dfe2e5;height:0;margin:15px 0;overflow:hidden;} .kGlFEZ .markdown-body hr:before{content:'';display:table;} .kGlFEZ .markdown-body hr:after{clear:both;content:'';display:table;} .kGlFEZ .markdown-body table{border-collapse:collapse;border-spacing:0;} .kGlFEZ .markdown-body td,.kGlFEZ .markdown-body th{padding:0;} .kGlFEZ .markdown-body details summary{cursor:pointer;} .kGlFEZ .markdown-body h1,.kGlFEZ .markdown-body h2,.kGlFEZ .markdown-body h3,.kGlFEZ .markdown-body h4,.kGlFEZ .markdown-body h5,.kGlFEZ .markdown-body h6{margin-bottom:0;margin-top:0;} .kGlFEZ .markdown-body h1{font-size:32px;} .kGlFEZ .markdown-body h1,.kGlFEZ .markdown-body h2{font-weight:600;} .kGlFEZ .markdown-body h2{font-size:24px;margin-top:36px;} .kGlFEZ .markdown-body h3{font-size:20px;margin-top:32px;} .kGlFEZ .markdown-body h3,.kGlFEZ .markdown-body h4{font-weight:600;} .kGlFEZ .markdown-body h4{font-size:16px;margin-top:22px;} .kGlFEZ .markdown-body h5{font-size:14px;margin-top:20px;} .kGlFEZ .markdown-body h5,.kGlFEZ .markdown-body h6{font-weight:600;} .kGlFEZ .markdown-body h6{font-size:12px;margin-top:18px;} .kGlFEZ .markdown-body p{line-height:28px;margin-bottom:24px;margin-top:0;} .kGlFEZ .markdown-body blockquote{margin:0;} .kGlFEZ .markdown-body ol,.kGlFEZ .markdown-body ul{margin-bottom:0;margin-top:0;padding-left:0;} .kGlFEZ .markdown-body ol ol,.kGlFEZ .markdown-body ul ol{list-style-type:lower-roman;} .kGlFEZ .markdown-body ol ol ol,.kGlFEZ .markdown-body ol ul ol,.kGlFEZ .markdown-body ul ol ol,.kGlFEZ .markdown-body ul ul ol{list-style-type:lower-alpha;} .kGlFEZ .markdown-body dd{margin-left:0;} .kGlFEZ .markdown-body code,.kGlFEZ .markdown-body pre{font-family:'Source Code Pro','Noto Sans KR',monospace;font-size:12px;} .kGlFEZ .markdown-body pre{margin-bottom:0;margin-top:0;} .kGlFEZ .markdown-body .footnotes p{display:inline;} .kGlFEZ .markdown-body input::-webkit-inner-spin-button,.kGlFEZ .markdown-body input::-webkit-outer-spin-button{-webkit-appearance:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0;} .kGlFEZ .markdown-body .border{border:1px solid #e1e4e8 !important;} .kGlFEZ .markdown-body .border-0{border:0 !important;} .kGlFEZ .markdown-body .border-bottom{border-bottom:1px solid #e1e4e8 !important;} .kGlFEZ .markdown-body .rounded-1{border-radius:3px !important;} .kGlFEZ .markdown-body .bg-white{background-color:#fff !important;} .kGlFEZ .markdown-body .bg-gray-light{background-color:#fafbfc !important;} .kGlFEZ .markdown-body .text-gray-light{color:#6a737d !important;} .kGlFEZ .markdown-body .mb-0{margin-bottom:0 !important;} .kGlFEZ .markdown-body .my-2{margin-bottom:8px !important;margin-top:8px !important;} .kGlFEZ .markdown-body .pl-0{padding-left:0 !important;} .kGlFEZ .markdown-body .py-0{padding-bottom:0 !important;padding-top:0 !important;} .kGlFEZ .markdown-body .pl-1{padding-left:4px !important;} .kGlFEZ .markdown-body .pl-2{padding-left:8px !important;} .kGlFEZ .markdown-body .py-2{padding-bottom:8px !important;padding-top:8px !important;} .kGlFEZ .markdown-body .pl-3,.kGlFEZ .markdown-body .px-3{padding-left:16px !important;} .kGlFEZ .markdown-body .px-3{padding-right:16px !important;} .kGlFEZ .markdown-body .pl-4{padding-left:24px !important;} .kGlFEZ .markdown-body .pl-5{padding-left:32px !important;} .kGlFEZ .markdown-body .pl-6{padding-left:40px !important;} .kGlFEZ .markdown-body .f6{font-size:12px !important;} .kGlFEZ .markdown-body .lh-condensed{line-height:1.25 !important;} .kGlFEZ .markdown-body .text-bold{font-weight:600 !important;} .kGlFEZ .markdown-body:before{content:'';display:table;} .kGlFEZ .markdown-body:after{clear:both;content:'';display:table;} .kGlFEZ .markdown-body >:first-child{margin-top:0 !important;} .kGlFEZ .markdown-body >:last-child{margin-bottom:0 !important;} .kGlFEZ .markdown-body a:not([href]){color:inherit;-webkit-text-decoration:none;text-decoration:none;} .kGlFEZ .markdown-body blockquote,.kGlFEZ .markdown-body dl,.kGlFEZ .markdown-body ol,.kGlFEZ .markdown-body p,.kGlFEZ .markdown-body pre,.kGlFEZ .markdown-body table,.kGlFEZ .markdown-body ul{margin-bottom:32px;margin-top:0;} .kGlFEZ .markdown-body hr{background-color:#e1e4e8;border:0;height:0.25em;margin:24px 0;padding:0;} .kGlFEZ .markdown-body blockquote{border-left:0.25em solid #dfe2e5;color:#6a737d;padding:0 1em;} .kGlFEZ .markdown-body blockquote >:first-child{margin-top:0;} .kGlFEZ .markdown-body blockquote >:last-child{margin-bottom:0;} .kGlFEZ .markdown-body kbd{background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5;color:#444d56;display:inline-block;font-size:11px;line-height:10px;padding:3px 5px;vertical-align:middle;} .kGlFEZ .markdown-body h1,.kGlFEZ .markdown-body h2,.kGlFEZ .markdown-body h3,.kGlFEZ .markdown-body h4,.kGlFEZ .markdown-body h5,.kGlFEZ .markdown-body h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:44px;} .kGlFEZ .markdown-body h1{font-size:2em;} .kGlFEZ .markdown-body h1,.kGlFEZ .markdown-body h2{border-bottom:1px solid #eaecef;padding-bottom:0.3em;} .kGlFEZ .markdown-body h2{font-size:1.5em;} .kGlFEZ .markdown-body h3{font-size:1.15em;font-weight:400;} .kGlFEZ .markdown-body h4{font-size:1em;} .kGlFEZ .markdown-body h5{font-size:0.875em;} .kGlFEZ .markdown-body h6{color:#6a737d;font-size:0.85em;} .kGlFEZ .markdown-body ol,.kGlFEZ .markdown-body ul{padding-left:2em;} .kGlFEZ .markdown-body ol ol,.kGlFEZ .markdown-body ol ul,.kGlFEZ .markdown-body ul ol,.kGlFEZ .markdown-body ul ul{margin-bottom:0;margin-top:0;} .kGlFEZ .markdown-body li{word-wrap:break-all;} .kGlFEZ .markdown-body li > p{margin-top:0;margin-bottom:0;} .kGlFEZ .markdown-body li + li{margin-top:0.25em;} .kGlFEZ .markdown-body dl{padding:0;} .kGlFEZ .markdown-body dl dt{font-size:1em;font-style:italic;font-weight:600;margin-top:16px;padding:0;} .kGlFEZ .markdown-body dl dd{margin-bottom:16px;padding:0 16px;} .kGlFEZ .markdown-body table{display:block;overflow:auto;width:100%;} .kGlFEZ .markdown-body table th{font-weight:600;} .kGlFEZ .markdown-body table td,.kGlFEZ .markdown-body table th{border:1px solid #dfe2e5;padding:6px 13px;} .kGlFEZ .markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1;} .kGlFEZ .markdown-body table tr:nth-child(2n){background-color:#f6f8fa;} .kGlFEZ .markdown-body img{background-color:#fff;box-sizing:content-box;max-width:100%;} .kGlFEZ .markdown-body img[align='right']{padding-left:20px;} .kGlFEZ .markdown-body img[align='left']{padding-right:20px;} .kGlFEZ .markdown-body code{background-color:rgba(27,31,35,0.05);border-radius:3px;font-size:85%;margin:0;padding:0.2em 0.4em;} .kGlFEZ .markdown-body pre{word-wrap:normal;} .kGlFEZ .markdown-body pre > code{background:transparent;border:0;font-size:100%;margin:0;padding:0;white-space:pre;word-break:normal;} .kGlFEZ .markdown-body .highlight{margin-bottom:16px;} .kGlFEZ .markdown-body .highlight pre{margin-bottom:0;word-break:normal;} .kGlFEZ .markdown-body .highlight pre,.kGlFEZ .markdown-body pre{background-color:#f6f8fa;border-radius:3px;font-size:85%;line-height:1.45;overflow:auto;padding:16px;box-shadow:0 4px 5px -2px rgba(41,42,43,0.2);} .kGlFEZ .markdown-body pre code{background-color:transparent;border:0;display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0;word-wrap:normal;} .kGlFEZ .markdown-body .commit-tease-sha{color:#444d56;display:inline-block;font-family:'Source Code Pro','Noto Sans KR',monospace;font-size:90%;} .kGlFEZ .markdown-body .blob-wrapper{border-bottom-left-radius:3px;border-bottom-right-radius:3px;overflow-x:auto;overflow-y:hidden;} .kGlFEZ .markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto;} .kGlFEZ .markdown-body .blob-num{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;color:rgba(27,31,35,0.3);cursor:pointer;font-family:'Source Code Pro','Noto Sans KR',monospace;font-size:12px;line-height:20px;min-width:50px;padding-left:10px;padding-right:10px;text-align:right;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;white-space:nowrap;width:1%;} .kGlFEZ .markdown-body .blob-num:hover{color:rgba(27,31,35,0.6);} .kGlFEZ .markdown-body .blob-num:before{content:attr(data-line-number);} .kGlFEZ .markdown-body .blob-code{line-height:20px;padding-left:10px;padding-right:10px;position:relative;vertical-align:top;} .kGlFEZ .markdown-body .blob-code-inner{color:#24292e;font-family:'Source Code Pro','Noto Sans KR',monospace;font-size:12px;overflow:visible;white-space:pre;word-wrap:normal;} .kGlFEZ .markdown-body .pl-token.active,.kGlFEZ .markdown-body .pl-token:hover{background:#ffea7f;cursor:pointer;} .kGlFEZ .markdown-body kbd{background-color:#fafbfc;border:1px solid #d1d5da;border-bottom-color:#c6cbd1;border-radius:3px;box-shadow:inset 0 -1px 0 #c6cbd1;color:#444d56;display:inline-block;font-family:'Source Code Pro','Noto Sans KR',monospace;font-size:11px;line-height:10px;padding:3px 5px;vertical-align:middle;} .kGlFEZ .markdown-body:checked + .radio-label{border-color:#0366d6;position:relative;z-index:1;} .kGlFEZ .markdown-body .tab-size[data-tab-size='1']{-moz-tab-size:1;tab-size:1;} .kGlFEZ .markdown-body .tab-size[data-tab-size='2']{-moz-tab-size:2;tab-size:2;} .kGlFEZ .markdown-body .tab-size[data-tab-size='3']{-moz-tab-size:3;tab-size:3;} .kGlFEZ .markdown-body .tab-size[data-tab-size='4']{-moz-tab-size:4;tab-size:4;} .kGlFEZ .markdown-body .tab-size[data-tab-size='5']{-moz-tab-size:5;tab-size:5;} .kGlFEZ .markdown-body .tab-size[data-tab-size='6']{-moz-tab-size:6;tab-size:6;} .kGlFEZ .markdown-body .tab-size[data-tab-size='7']{-moz-tab-size:7;tab-size:7;} .kGlFEZ .markdown-body .tab-size[data-tab-size='8']{-moz-tab-size:8;tab-size:8;} .kGlFEZ .markdown-body .tab-size[data-tab-size='9']{-moz-tab-size:9;tab-size:9;} .kGlFEZ .markdown-body .tab-size[data-tab-size='10']{-moz-tab-size:10;tab-size:10;} .kGlFEZ .markdown-body .tab-size[data-tab-size='11']{-moz-tab-size:11;tab-size:11;} .kGlFEZ .markdown-body .tab-size[data-tab-size='12']{-moz-tab-size:12;tab-size:12;} .kGlFEZ .markdown-body .task-list-item{list-style-type:none;} .kGlFEZ .markdown-body .task-list-item + .task-list-item{margin-top:3px;} .kGlFEZ .markdown-body .task-list-item input{margin:0 0.2em 0.25em -1.6em;vertical-align:middle;} .kGlFEZ .markdown-body hr{border-bottom-color:#eee;} .kGlFEZ .markdown-body .pl-0{padding-left:0 !important;} .kGlFEZ .markdown-body .pl-1{padding-left:4px !important;} .kGlFEZ .markdown-body .pl-2{padding-left:8px !important;} .kGlFEZ .markdown-body .pl-3{padding-left:16px !important;} .kGlFEZ .markdown-body .pl-4{padding-left:24px !important;} .kGlFEZ .markdown-body .pl-5{padding-left:32px !important;} .kGlFEZ .markdown-body .pl-6{padding-left:40px !important;} .kGlFEZ .markdown-body .pl-7{padding-left:48px !important;} .kGlFEZ .markdown-body .pl-8{padding-left:64px !important;} .kGlFEZ .markdown-body .pl-9{padding-left:80px !important;} .kGlFEZ .markdown-body .pl-10{padding-left:96px !important;} .kGlFEZ .markdown-body .pl-11{padding-left:112px !important;} .kGlFEZ .markdown-body .pl-12{padding-left:128px !important;}
/* sc-component-id: post__PostHeader-sc-1sfv28x-1 */
.bFOsCX{padding:32px 8px;text-align:center;}
/* sc-component-id: post__PostTitle-sc-1sfv28x-2 */
.gUlJEp{font-size:32px;font-weight:bold;color:#3e4042;line-height:40px;-webkit-letter-spacing:-0.6px;-moz-letter-spacing:-0.6px;-ms-letter-spacing:-0.6px;letter-spacing:-0.6px;margin:0;margin:16px 0;}
/* sc-component-id: post__PostDate-sc-1sfv28x-3 */
.jdkpkB{margin-bottom:16px;}
/* sc-component-id: post__PostTOC-sc-1sfv28x-4 */
.dWSCZy{font-size:14px;font-weight:normal;color:#3e4042;line-height:20px;-webkit-letter-spacing:-0.2px;-moz-letter-spacing:-0.2px;-ms-letter-spacing:-0.2px;letter-spacing:-0.2px;margin:0;margin:16px 0;padding:16px 0;line-height:26px;border:#bdc2c6 solid 1px;} .dWSCZy a{color:inherit;-webkit-text-decoration:none;text-decoration:none;} .dWSCZy a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .dWSCZy ul,.dWSCZy ol{margin:0 0 0 8px;list-style-type:decimal;} .dWSCZy p{margin:0;}
/* sc-component-id: post__PostBody-sc-1sfv28x-5 */
.ceeZup{margin:16px 0;}
/* sc-component-id: post__PostFooter-sc-1sfv28x-6 */
.gEKJQZ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;} @media (max-width:425px){.gEKJQZ{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}
/* sc-component-id: post__PostNavigator-sc-1sfv28x-7 */
.lhRAoc{display:block;position:relative;-webkit-flex:1;-ms-flex:1;flex:1;background:black;opacity:0.99;} .lhRAoc img{z-index:1;opacity:0.5;} .lhRAoc:hover img{-webkit-transition:-webkit-transform 0.3s ease-in;-webkit-transition:transform 0.3s ease-in;transition:transform 0.3s ease-in;-webkit-transform:scale(1.025);-ms-transform:scale(1.025);transform:scale(1.025);}
/* sc-component-id: post__PostNavigatorTitle-sc-1sfv28x-8 */
.dBDefs{font-size:19px;position:absolute;top:50%;margin-top:-39px;text-align:center;width:100%;font-weight:800;color:white;z-index:2;} .dBDefs span{font-weight:400;} .dBDefs b{font-weight:600;}</style><link as="script" rel="preload" href="/component---src-templates-post-tsx-c94eddf0fc3c3e8c57cc.js"/><link as="script" rel="preload" href="/12-363ce47a5cc4cb526ffe.js"/><link as="script" rel="preload" href="/0-9da074a2ae788350ccf5.js"/><link as="script" rel="preload" href="/app-b7ff6590f9bf92da68bc.js"/><link as="script" rel="preload" href="/styles-672d624a319f9e44eab1.js"/><link as="script" rel="preload" href="/webpack-runtime-fc9784a1e968cce5c8b8.js"/><link as="fetch" rel="preload" href="/page-data/ko/blog/2019/07/12/tony/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="root Layout__Root-sc-50n0nv-0 jGmALK"><nav class="Header__NavConatiner-sc-938f43-0 jltglz"><div class="sc-cMhqgX kUFcze"><div class="sc-hZSUBg bwAdMP"><div class="sc-bsbRJL DNFnA"><div class="Header__NavInnerContainer-sc-938f43-1 iBrsbu"><a class="Header__NoHoverLink-sc-938f43-3 fRkQwK" href="/ko/"><img src="/images/symbol-black.png" alt="class101" class="Header__LogoIcon-sc-938f43-2 fIzunj"/></a><div class="SearchInput__AutoCompleteContainer-sc-1d7gc1p-0 chJCBg"><input placeholder="제목 및 내용을 입력하세요" class="SearchInput__StyledInput-sc-1d7gc1p-3 UMvQk"/></div><div class="Header__MenuContainer-sc-938f43-4 btnDQV"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#858a8d" fill-rule="evenodd" d="M3 8h18V6H3v2zm0 5h18v-2H3v2zm0 5h18v-2H3v2z"></path></svg></div></div></div></div></div></nav><main class="Layout__Main-sc-50n0nv-1 jVcMoj"><div class="sc-cMhqgX kUFcze"><div class="sc-hZSUBg bwAdMP"><div class="sc-bsbRJL DNFnA"><div class="post__PostContainer-sc-1sfv28x-0 kGlFEZ"><div class="post__PostHeader-sc-1sfv28x-1 bFOsCX"><div class="ShareButtons__Wrapper-sc-6atok7-0 dHnwaE"><div class="ShareButtons__ButtonWrapper-sc-6atok7-1 fVbhVU"><div aria-label="facebook" role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--facebook"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--facebook "><g><circle cx="32" cy="32" r="31" fill="#3b5998"></circle></g><g><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></g></svg></div></div></div><div class="ShareButtons__ButtonWrapper-sc-6atok7-1 fVbhVU"><div aria-label="twitter" role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--twitter"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--twitter "><g><circle cx="32" cy="32" r="31" fill="#00aced"></circle></g><g><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></g></svg></div></div></div><div class="ShareButtons__ButtonWrapper-sc-6atok7-1 fVbhVU"><div aria-label="linkedin" role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--linkedin"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--linkedin "><g><circle cx="32" cy="32" r="31" fill="#007fb1"></circle></g><g><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></g></svg></div></div></div><div class="ShareButtons__ButtonWrapper-sc-6atok7-1 fVbhVU"><div aria-label="email" role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--email"><div style="width:32px;height:32px"><svg viewBox="0 0 64 64" width="32" height="32" class="social-icon social-icon--email "><g><circle cx="32" cy="32" r="31" fill="#7f7f7f"></circle></g><g><path d="M17,22v20h30V22H17z M41.1,25L32,32.1L22.9,25H41.1z M20,39V26.6l12,9.3l12-9.3V39H20z" fill="white"></path></g></svg></div></div></div></div><a class="LinkTag__StyledLink-o5p4f2-0 bdPnbg" href="/ko/tags/typescript/">Typescript<!-- --> </a><a class="LinkTag__StyledLink-o5p4f2-0 bdPnbg" href="/ko/tags/monorepo/">Monorepo<!-- --> </a><a class="LinkTag__StyledLink-o5p4f2-0 bdPnbg" href="/ko/tags/lerna/">Lerna<!-- --> </a><a class="LinkTag__StyledLink-o5p4f2-0 bdPnbg" href="/ko/tags/git/">Git<!-- --> </a><h1 class="post__PostTitle-sc-1sfv28x-2 gUlJEp">Monorepo with typescript (1)</h1><div class="post__PostDate-sc-1sfv28x-3 jdkpkB sc-bdVaJa hBKkTB">2019-07-12</div></div><div class="post__PostTOC-sc-1sfv28x-4 dWSCZy"><ul>
<li>
<p><a href="//#jump-to-monorepo">Jump to Monorepo</a></p>
<ul>
<li><a href="//#overview">Overview</a></li>
<li><a href="//#%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EC%9D%98-%EC%9D%B4%ED%95%B4">모노레포의 이해</a></li>
<li>
<p><a href="//#%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EC%9D%98-%ED%8A%B9%EC%A7%95">모노레포의 특징</a></p>
<ul>
<li><a href="//#%EC%BD%94%EB%93%9C%EC%9D%98-%EC%9E%AC%EC%82%AC%EC%9A%A9">코드의 재사용</a></li>
<li><a href="//#%EC%9D%98%EC%A1%B4%EC%84%B1-%EA%B4%80%EB%A6%AC">의존성 관리</a></li>
<li><a href="//#%EC%9E%91%EC%9D%80-%EC%BB%A4%EB%B0%8B%EA%B3%BC-pr">작은 커밋과 PR</a></li>
<li><a href="//#%EB%8C%80%EA%B7%9C%EB%AA%A8-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81">대규모 리팩토링</a></li>
<li><a href="//#%ED%8C%80-%EA%B0%84-%ED%98%91%EC%97%85">팀 간 협업</a></li>
<li><a href="//#trunk-based-development">Trunk Based Development</a></li>
</ul>
</li>
<li>
<p><a href="//#%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1">모노레포의 필요성</a></p>
<ul>
<li><a href="//#schema-synchronization%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%B3%80%ED%99%98">Schema Synchronization를 통한 인터페이스 변환</a></li>
<li><a href="//#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%8B%A4%ED%96%89">테스트 실행</a></li>
</ul>
</li>
<li>
<p><a href="//#code-base-%EC%A1%B0%ED%95%A9ab">Code Base 조합(a)(b)</a></p>
<ul>
<li><a href="//#%EA%B0%9C%EB%B0%9C-%EC%BB%A4%EB%AE%A4%EB%8B%88%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%84-%EC%9C%84%ED%95%9C-git-history%EC%9D%98-%EB%B3%B4%EC%A1%B4">개발 커뮤니케이션을 위한 Git history의 보존</a></li>
<li><a href="//#lerna%EC%9D%98-%EC%82%AC%EC%9A%A9%EA%B3%BC-%EB%AC%B8%EC%A0%9C%EC%A0%90">lerna의 사용과 문제점</a></li>
<li><a href="//#git-log-git-am%EC%9D%84-%ED%86%B5%ED%95%9C-codebase-%EC%A1%B0%ED%95%A9">git log, git am을 통한 CodeBase 조합</a></li>
</ul>
</li>
<li><a href="//#%EA%B2%B0%EB%A1%A0">결론</a></li>
<li><a href="//#%EC%B0%B8%EA%B3%A0">참고</a></li>
<li><a href="//#%EC%B0%B8%EA%B3%A0%EB%AC%B8%ED%97%8C">참고문헌</a></li>
</ul>
</li>
</ul></div><div class="markdown-body post__PostBody-sc-1sfv28x-5 ceeZup"><h1><span id="jump-to-monorepo">Jump to Monorepo</span></h1>
<p><strong>편집자 주</strong>
‘Monorepo’는 독자의 가독성을 높이기 위해 글의 제목을 제외한 본문 전체에서 ‘모노레포’로 한글 표기함. 이는 외래어 표기법 상 관용에 해당함.</p>
<h2><span id="overview">Overview</span></h2>
<p>이번 글에서는 모노레포를 도입한 계기와 장・단점, Git history를 보존한 채 레포지토리를 합치는 방법을 다루겠습니다.</p>
<h2><span id="%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EC%9D%98-%EC%9D%B4%ED%95%B4">모노레포의 이해</span></h2>
<p>모노레포는 두 개 이상의 프로젝트 코드를 하나의 레포지토리에서 관리하는 기법입니다.[1] 페이스북이나 구글, 마이크로소프트 등 대형 소프트웨어 기업에서도 사용되고 있고, 일부 인기 있는 오픈 소스 프로젝트들도 그들의 레포지토리를 관리하기 위해 Monorepo를 쓰고 있습니다. 그렇다면 클래스101에서는 왜 모노레포가 필요할까요? 우선 그 특징부터 살펴보겠습니다.</p>
<h2><span id="%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EC%9D%98-%ED%8A%B9%EC%A7%95">모노레포의 특징</span></h2>
<h3><span id="%EC%BD%94%EB%93%9C%EC%9D%98-%EC%9E%AC%EC%82%AC%EC%9A%A9">코드의 재사용</span></h3>
<p>여러 레포지토리에서 프로젝트를 진행하면 비슷한 로직을 각 레포지토리에서 중복 구현하는 때가 많습니다. 공통 로직을 다시 작성하지 않고 공유하려면 레포지토리를 추가하고 이에 해당하는 의존성을 추가해주어야 합니다. 다른 레포의 의존성을 추가하는 것은 같은 레포에서 패키지의 의존성을 추가하는 것보다 많은 비용이 듭니다. 만약 멀티레포에서는 적절한 버전을 찾아 <code class="language-text">package.json</code> 에 추가해주고 <code class="language-text">npm install</code> 과 같은 커맨드를 매번 실행해주어야 합니다. 반면 lerna(JavaScript 모노레포 관리 툴)를 사용한다면 <code class="language-text">lerna boostrap</code> 이라는 하나의 커맨드로 모든 의존성을 추가하고 해당 상태에서 드 수정을 할 수 있습니다.</p>
<h3><span id="%EC%9D%98%EC%A1%B4%EC%84%B1-%EA%B4%80%EB%A6%AC">의존성 관리</span></h3>
<p>클래스101에서는 Code Formatting을 위해 prettier, Code Linting을 위한 tslint를 사용합니다. 기존의 멀티레포 구조에서는 각 레포에 prettier, tslint를 각각 설치해야 했습니다. 하지만 모노레포와 함께라면 각 레포를 Cloning하고 일일이 업데이트하는 과정을 거치지 않아도 됩니다.</p>
<h3><span id="%EC%9E%91%EC%9D%80-%EC%BB%A4%EB%B0%8B%EA%B3%BC-pr">작은 커밋과 PR</span></h3>
<p>여러 레포에서 변경사항이 있다면 개발자는 작은 커밋으로 나눠 PR(Pull Request)을 보내는 것보다, 모든 코드를 작성하고 이에 대한 의존성을 바꾸는 방식의 작업을 선호합니다. 하지만 모노레포에서는 여러 패키지의 변경사항을 하나의 커밋과 PR로 제출할 수 있습니다. 덕분에 더 작게 나눠서 작업할 수 있죠. 다만 하나의 커밋에는 한 패키지의 변경사항만 기록하는 SRP(Single Responsibility Principle, 단일 책임 원칙)를 지켜야 합니다.</p>
<h3><span id="%EB%8C%80%EA%B7%9C%EB%AA%A8-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81">대규모 리팩토링</span></h3>
<p>모노레포로 레포지터리를 운영해보니 하나의 파일에 대한 컨트리뷰터가 상당히 많아졌습니다. 다행히 해당 로직을 이해하는 동료가 많아 여러 사람이 효율적으로 로직을 작성하는 방식에 대해서도 함께 생각할 수 있었죠. 이와 같은 멘탈 모델 얼라인으로 대규모 리팩토링을 유도할 수 있었습니다.</p>
<h3><span id="%ED%8C%80-%EA%B0%84-%ED%98%91%EC%97%85">팀 간 협업</span></h3>
<p>모든 구성원이 모든 코드에 접근할 수 있기 때문에 팀 간 협업이 자유롭습니다.</p>
<h3><span id="trunk-based-development">Trunk Based Development</span></h3>
<p>모노레포에서는 서버와 웹을 합쳐 하나의 버전으로 판단할 수 있습니다. 이것은 Master 브랜치를 항상 배포할 수 있도록 유지하는 Trunk Basement Development를 진행하는 데에 도움이 됩니다.</p>
<h2><span id="%EB%AA%A8%EB%85%B8%EB%A0%88%ED%8F%AC%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1">모노레포의 필요성</span></h2>
<h3><span id="schema-synchronization%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4-%EB%B3%80%ED%99%98">Schema Synchronization를 통한 인터페이스 변환</span></h3>
<p>클래스101에서는 모든 코드를 TypeScript로 작성하고 있습니다. 또한 Apollo Server와 type-graphql을 이용하여 GraphQL기반 API도 작성하고 있어 GraphQL 스키마를 TypeScript 인터페이스로 변환하는 과정이 꼭 필요합니다. 우리는 이것을 Class101에서는 <code class="language-text">Schema Sync</code> 라고 부릅니다. 기존에는 스테이징 서버에서 제공하주는 <code class="language-text">schema.gql</code> 파일을 이용하여 <code class="language-text">Schema Sync</code> 를 진행했었습니다. 하지만 스테이징 서버가 업데이트되기 전에 Schema를 변경하거나 이를 사용하는 웹과 앱에서 Fragment를 변경하면 위험할 수도 있었죠. 모노레포에서는 서버 코드를 변경할 때 코드를 기반으로 <code class="language-text">Schema Sync</code> 를 실행할 수 있어 이러한 위험요소를 제거할 수 있었습니다.</p>
<h3><span id="%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%8B%A4%ED%96%89">테스트 실행</span></h3>
<p>Cypress, Pupeeter등을 이용하여 E2E 테스트를 실행한다고 가정해봅시다. 배포가능함을 보장하기 위해선 서버가 변경됐을 때도, 웹이 변경됐을 때도 E2E 테스트를 실행해야 합니다. 멀티레포에서는 하나의 Testing레포를 만들거나 각각의 레포에 E2E테스트를 중복구현해야 합니다. 그러나 모노레포에서는 테스트를 위한 package하나만 추가해주면 모든 변경사항에 대해 지속적으로 테스트할 수 있습니다.</p>
<p>모노레포를 도입하는 것은 빠르면 빠를수록 좋습니다. 코드가 늘어나고, 의존성이 늘어날 수록 고려해야 할 사항이 많이지기 때문이죠. 클래스101에서도 더 늦기 전에 모노레포를 도입하기로 했습니다. 가장 먼저 진행한 작업은 Code Base 조합이었습니다.</p>
<h2><span id="code-base-%EC%A1%B0%ED%95%A9-a-b">Code Base 조합(a)(b)</span></h2>
<h3><span id="%EA%B0%9C%EB%B0%9C-%EC%BB%A4%EB%AE%A4%EB%8B%88%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%84-%EC%9C%84%ED%95%9C-git-history%EC%9D%98-%EB%B3%B4%EC%A1%B4">개발 커뮤니케이션을 위한 Git history의 보존</span></h3>
<p>개발자가 새로운 기능을 개발하다가 기존의 기능을 함께 이용하면 가장 많이 듣는 질문은 바로 “이거 왜 이렇게 개발했어?”입니다. 흔히 Blame이라고도 합니다. 이런 Blame에 대한 기록이 모두 사라지면 나중에 커뮤니케이션 효율이 떨어질 수밖에 없습니다. 이와 같은 부작용을 겪지 않기 위해 Git history를 모두 보존해야 했습니다. 먼저 lerna를 써봤습니다.</p>
<h3><span id="lerna%EC%9D%98-%EC%82%AC%EC%9A%A9%EA%B3%BC-%EB%AC%B8%EC%A0%9C%EC%A0%90">lerna의 사용과 문제점</span></h3>
<p>lerna에는 <code class="language-text">import</code>라는 커맨드가 존재합니다. 아래와 같은 폴더 구조를 가진 프로젝트를 가정해봅시다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">package-1/
    package.json
my-lerna-repo/
    package.json
    packages/
    package-2/
        package.json</code></pre></div>
<p>만약 package-1을 my-lerna-repo/에 추가하고 싶다면 <code class="language-text">import</code>커맨드를 사용하면 됩니다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># cd my-lerna-repo</span>
lerna <span class="token function">import</span> <span class="token punctuation">..</span>/package-1</code></pre></div>
<p>아래와 같은 에러가 나타난다면 flatten 옵션을 주어 실행하면 됩니다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># &lt;https://stackoverflow.com/questions/52119818/trouble-importing-project-in-lerna&gt;</span>
<span class="token comment"># 해당 에러를 기록해 두지 않아 에러 로그는 스택오버플로우에서 가져왔습니다.</span>
lerna ERR<span class="token operator">!</span> <span class="token function">import</span> Rolling back to previous HEAD <span class="token punctuation">(</span>commit a235ee9b3c382c9751abf792a22b2ec9df894a18<span class="token punctuation">)</span>
lerna ERR<span class="token operator">!</span> EIMPORT Failed to apply commit a932c8cf8.
lerna ERR<span class="token operator">!</span> EIMPORT Command failed: <span class="token function">git</span> am -3 --keep-non-patch
lerna ERR<span class="token operator">!</span> EIMPORT error: Failed to merge <span class="token keyword">in</span> the changes.
lerna ERR<span class="token operator">!</span> EIMPORT Applying: Made Device Analytics Controller. Made device-analytics.stache be rendered through controller.
lerna ERR<span class="token operator">!</span> EIMPORT Using index info to reconstruct a base tree<span class="token punctuation">..</span>.
lerna ERR<span class="token operator">!</span> EIMPORT M    packages/some-repo/app/scripts/app/controls/active-device.js
lerna ERR<span class="token operator">!</span> EIMPORT M    packages/some-repo/app/templates/device/active-device.stache
lerna ERR<span class="token operator">!</span> EIMPORT M    packages/some-repo/views/index.jade
lerna ERR<span class="token operator">!</span> EIMPORT Falling back to patching base and 3-way merge<span class="token punctuation">..</span>.
lerna ERR<span class="token operator">!</span> EIMPORT Auto-merging packages/some-repo/app/templates/device/device-analytics.stache
lerna ERR<span class="token operator">!</span> EIMPORT CONFLICT <span class="token punctuation">(</span>add/add<span class="token punctuation">)</span>: Merge conflict <span class="token keyword">in</span> packages/some-repo/app/templates/device/device-analytics.stache
lerna ERR<span class="token operator">!</span> EIMPORT Auto-merging packages/some-repo/app/scripts/app/controls/device-analytics.js
lerna ERR<span class="token operator">!</span> EIMPORT CONFLICT <span class="token punctuation">(</span>add/add<span class="token punctuation">)</span>: Merge conflict <span class="token keyword">in</span> packages/some-repo/app/scripts/app/controls/device-analytics.js
lerna ERR<span class="token operator">!</span> EIMPORT Auto-merging packages/some-repo/app/scripts/app/controls/active-device.js
lerna ERR<span class="token operator">!</span> EIMPORT CONFLICT <span class="token punctuation">(</span>content<span class="token punctuation">)</span>: Merge conflict <span class="token keyword">in</span> packages/some-repo/app/scripts/app/controls/active-device.js
lerna ERR<span class="token operator">!</span> EIMPORT Patch failed at 0001 Made Device Analytics Controller. Made device-analytics.stache be rendered through controller.
lerna ERR<span class="token operator">!</span> EIMPORT The copy of the patch that failed is found in: .git/rebase-apply/patch
lerna ERR<span class="token operator">!</span> EIMPORT When you have resolved this problem, run <span class="token string">&quot;git am --continue&quot;</span><span class="token keyword">.</span>
lerna ERR<span class="token operator">!</span> EIMPORT If you prefer to skip this patch, run <span class="token string">&quot;git am --skip&quot;</span> instead.
lerna ERR<span class="token operator">!</span> EIMPORT To restore the original branch and stop patching, run <span class="token string">&quot;git am --abort&quot;</span><span class="token keyword">.</span>
lerna ERR<span class="token operator">!</span> EIMPORT
lerna ERR<span class="token operator">!</span> EIMPORT
lerna ERR<span class="token operator">!</span> EIMPORT You may try again with --flatten to <span class="token function">import</span> flat history.</code></pre></div>
<p>실제로 <code class="language-text">lerna import</code>커맨드를 사용하게 되면 모든 것이 해결되진 않습니다. flatten 옵션을 줘도 마찬가지죠. 이는 프로젝트 초기에 Merge, Rebase, Force Push 등을 하며 올바르지 않은 변경사항이 강제로 합쳐진 경우가 있기 때문입니다. 이 경우엔 아래와 같은 에러를 마주할 것입니다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># &lt;https://stackoverflow.com/questions/52119818/trouble-importing-project-in-lerna&gt;</span>
lerna ERR<span class="token operator">!</span> EIMPORT Failed to apply commit f16ede066.
lerna ERR<span class="token operator">!</span> EIMPORT Command failed: <span class="token function">git</span> am -3 --keep-non-patch
lerna ERR<span class="token operator">!</span> EIMPORT error: <span class="token function">git</span> <span class="token function">diff</span> header lacks filename information when removing 1 leading pathname component <span class="token punctuation">(</span>line 845968<span class="token punctuation">)</span>
lerna ERR<span class="token operator">!</span> EIMPORT error: could not build fake ancestor
lerna ERR<span class="token operator">!</span> EIMPORT Applying: Adding dist files. Refs <span class="token comment">#17</span>
lerna ERR<span class="token operator">!</span> EIMPORT Patch failed at 0001 Adding dist files. Refs <span class="token comment">#17</span>
lerna ERR<span class="token operator">!</span> EIMPORT The copy of the patch that failed is found in: .git/rebase-apply/patch
lerna ERR<span class="token operator">!</span> EIMPORT When you have resolved this problem, run <span class="token string">&quot;git am --continue&quot;</span><span class="token keyword">.</span>
lerna ERR<span class="token operator">!</span> EIMPORT If you prefer to skip this patch, run <span class="token string">&quot;git am --skip&quot;</span> instead.
lerna ERR<span class="token operator">!</span> EIMPORT To restore the original branch and stop patching, run <span class="token string">&quot;git am --abort&quot;</span><span class="token keyword">.</span></code></pre></div>
<h3><span id="git-log-git-am%EC%9D%84-%ED%86%B5%ED%95%9C-code-base-%EC%A1%B0%ED%95%A9">git log, git am을 통한 CodeBase 조합</span></h3>
<p>위와 같은 단점을 해결하기 위해 다른 해결책을 모색해야 했습니다. 클래스101의 테크리드, 조이의 도움으로 <code class="language-text">git log</code>와 <code class="language-text">git am</code>을 이용한다면 문제를 해결할 수 있다는 것을 알게 되었습니다. <code class="language-text">git am</code>은 대화식으로 patch apply 과정을 진행할 수 있기 때문이죠.</p>
<p><strong>git log</strong><br/>
terminal에서 <code class="language-text">man git-log</code> 를 이용하면 매우 다양한 옵션이 있다는 걸 알 수 있습니다. 그중에서도 <code class="language-text">-p</code> 옵션을 사용하면 아래 그림과 같은 patch파일을 만들 수 있었습니다.</p>
<p>
  <a class="gatsby-resp-image-link" href="/static/8fe36c17b8fe92eb151aa7324efa4800/857ee/stackoverflow.png" style="display:block" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;max-width:590px;margin-left:auto;margin-right:auto">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:65.06410256410257%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACY0lEQVQ4y22TbVPaUBCFQ1tBXhyBoqIgqBUVBAR5CQlJCElIiIAIUuvY2un//xOnJwlWZuqHZ87m3t2ze5Mb4WzyAx4n7ncE8ROuFq8o3b+gvPxNXnG9+oNo10JCchBum9hmHOvZxEGcazES6Y4Q7lgQ8qMFiuMVsuYDjp0VcvYSRfcJudESWWuBPNf8wjVR0abhiEZjxGXXN9tRJojyecszjHd0bDdVRBoKwiTW0vD5RoFwLWOroSLc1Hx9iyO3A58tEvZo6VTd10hbh3CkGOhMXTTcMeSHia8V28G5MUKVekE9kA2kxSGSXR2pHlU0sNszkJJMpGSLjJCkJiVOmGjKyPd1ZEQNBc3AEeNDNsmpFnKahaxiYr9vIMrJvamFah9CTQm0Sq2pEOrcuxkEFHQbe30Ted3BiemiMlngmGsZScceJzvgXpbmXs7hRpPdLourMkI1Gtdp2uBzk0e+Gt1BnMyx/PUTLWp7/oBLy4ZQFlkg+UXBVOvJ6sqG9oP964287MDA1WyK87GLU9dB0hwiphOF3So0LXcD/UePBr13k1r/3dijcOcgNxsjM7ZRmLnIOnZQ4BWW14Yfsm7g5W6eIm7xwpKoNkTohht1CZ+IlxiqSQjVA/wGPhvTvpm/Te6RMCzsjh3sr2Y4fJ5Tp8gs7sgEMX71hG4iztfiHTH0H2xa8RAZi74KAi+zwIu8w/uXXk6RoHn6cYovHU5bakI4X3NxS1oQLj/gosNcTlqitl+ecTYzcTI1+QsOUXQGOJvz2gwfkVYf8VVb+qTUJQ6UOYryPQqkuMaLvw2HKFkq0fAX2ZKMrwYm6TcAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block">
      <img class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white" alt="[그림 1] 출처: StackOverflow" title="" src="/static/8fe36c17b8fe92eb151aa7324efa4800/b9e4f/stackoverflow.png" srcSet="/static/8fe36c17b8fe92eb151aa7324efa4800/cf440/stackoverflow.png 148w,
/static/8fe36c17b8fe92eb151aa7324efa4800/d2d38/stackoverflow.png 295w,
/static/8fe36c17b8fe92eb151aa7324efa4800/b9e4f/stackoverflow.png 590w,
/static/8fe36c17b8fe92eb151aa7324efa4800/857ee/stackoverflow.png 624w" sizes="(max-width: 590px) 100vw, 590px"/>
    </span>
  </span>
  
  </a>
    </p>
<p><strong>git am</strong><br/>
<code class="language-text">git log</code> 를 통해 만들어진 패치파일을 <code class="language-text">git am</code> 을 이용해 모노레포 폴더에서 적용할 수 있었습니다. 역시나 다양한 옵션을 사용하였고 실제 사용한 커맨드는 아래와 같습니다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># in web folder</span>
<span class="token function">git</span> log --reverse --first-parent -p -m --pretty<span class="token operator">=</span>email --stat --binary HEAD <span class="token operator">&gt;</span> class101-web.patch

<span class="token comment"># in mono folder</span>
<span class="token function">git</span> am --directory packages/web <span class="token punctuation">..</span>/class101-web/class101-web.patch -3 --keep-non-patch --ignore-whitespace</code></pre></div>
<ul>
<li>
<p><code class="language-text">git log</code></p>
<ul>
<li>—reverse: git log 실행시 최근 커밋이 아닌 최초 커밋부터 기록을 확인하기 위해 사용한 옵션입니다.</li>
<li>—first-parent: merge commit에 대해 첫번째 부모 커밋만 보여주는 옵션입니다.</li>
<li>-p: patch를 만듭니다</li>
<li>-m: Diff Formatting 옵션입니다. merge commit들의 diff를 full로 보여줍니다.</li>
<li>—pretty: 커밋 로그를 주어진 param값에 맞추어 보여줍니다. oneline, short, medium, full, fuller, email, raw, format:$string and tformat:$string 중 하나의 값이 올 수 있습니다.</li>
<li>—stat: diffstat을 만듭니다.</li>
<li>—binary: output a binary diff that can be applied with git-apply</li>
</ul>
</li>
<li>
<p><code class="language-text">git am</code></p>
<ul>
<li>—directory: filename에 주어진 prefix를 붙입니다. (directory 위치 변경)</li>
<li>-3: patch가 깨끗하게 적용이 되지 않았을 때, 3-way merge를 통해 재 적용합니다.</li>
<li>—keep-non-patch: git의 mail info에 대해 -b 옵션을 전달합니다. 이는 PATCH를 포함한 bracket 짝이 있을 때에만 stripping합니다.</li>
<li>—ignore-whitespace: ignore changes in whitespace in context lines if necessary</li>
<li>참고 이미지

  <a class="gatsby-resp-image-link" href="/static/2b222aec948a508a16693117a1783e81/eccb6/github-diff.png" style="display:block" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;max-width:590px;margin-left:auto;margin-right:auto">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:31.678252234359483%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5UlEQVQY04WQT0vDQBDF8/2/g3jyUjyoBy+iZz+BYMVCq9aGUptsdmc32T8/s8GU0AqdZZgZmPf2vSm89xhjsNYRQkDE0nUdYgRVq34WUkonGWM89D552tgNtRBrqZWiHsCWRmtc29KIYm8qUjwly5GFrD6+2O32PH0/c/V+y83ygSL/lDOrG/sMCjEQUhjAI8lYnXOsNxt076JpNJVWmFaw3lFwJqZkU3XbcofRvaPaII097Bf/3efY3vEsTnhZzXn7XLCuSn7s32n6d1bhVOlIWJotF/MZs8U9l6/X3C0f+wUGwl+HK9LL4ACuoQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block">
      <img class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white" alt="[그림 2] 출처: The GitHub Blog" title="" src="/static/2b222aec948a508a16693117a1783e81/b9e4f/github-diff.png" srcSet="/static/2b222aec948a508a16693117a1783e81/cf440/github-diff.png 148w,
/static/2b222aec948a508a16693117a1783e81/d2d38/github-diff.png 295w,
/static/2b222aec948a508a16693117a1783e81/b9e4f/github-diff.png 590w,
/static/2b222aec948a508a16693117a1783e81/f9b6a/github-diff.png 885w,
/static/2b222aec948a508a16693117a1783e81/2d849/github-diff.png 1180w,
/static/2b222aec948a508a16693117a1783e81/eccb6/github-diff.png 2014w" sizes="(max-width: 590px) 100vw, 590px"/>
    </span>
  </span>
  
  </a>
    </li>
</ul>
</li>
</ul>
<h2><span id="%EA%B2%B0%EB%A1%A0">결론</span></h2>
<p>지금까지 Monorepo의 특징을 살펴보고 lerna, git log, git am을 통해 Code Base까지 조합했습니다. 결과는 두 가지로 정리할 수 있습니다.</p>
<ol>
<li><code class="language-text">lerna import</code>를 할 수 있는 패키지는 <code class="language-text">lerna import</code>를 사용한다.</li>
<li><code class="language-text">lerna import</code>를 할 수 없는 패키지는 <code class="language-text">git log</code>를 이용하여 패치 파일을 만들고 <code class="language-text">git am</code>을 이용하여 해당 패치 파일을 적용한다.</li>
</ol>
<p>위와 같이 진행하니 약 3,800개의 커밋이 누락되었습니다. merge commit이 제외된 것도 포함한 수치입니다. 하지만 마지막 상태가 같고 최근 커밋은 모두 보존되어 레포지토리를 합치는 데에는 문제가 없었습니다. 개발 업무에 모노레포 도입이 필요하신가요? 아니면 깔끔하게 Git history를 보존하고 싶으신가요? 어떤 경우든 이번 글이 분명 업무 환경 개선에 도움이 될 겁니다.</p>
<h2><span id="%EC%B0%B8%EA%B3%A0">참고</span></h2>
<p>(a) 이 글에서는 javascript만 사용하는 프로젝트를 다루므로 Multi Language Monorepo 관리 자료는 아래 URL에서 참고할 수 있다. <a href="https://github.com/korfuri/awesome-monorepo" target="_blank" rel="nofollow">https:// github.com/korfuri/awesome-monorepo</a></p>
<p>(b) ‘조합(組合)‘은 ‘여럿을 한데 모아 한 덩어리로 짬.‘을 뜻하고, ‘결합(結合)‘은 ‘둘 이상의 사물이나 사람이 서로 관계를 맺어 하나가 됨.‘을 뜻한다. 본문에서는 두 목록을 합쳐 하나의 새로운 목록을 구성하였으므로 그 문맥상 ‘조합’으로 표기한다.</p>
<h2><span id="%EC%B0%B8%EA%B3%A0%EB%AC%B8%ED%97%8C">참고문헌</span></h2>
<p><strong>논문 및 학술자료</strong></p>
<ol>
<li>Gleison Brito ・ Ricardo Terra ・ Marco Tulio Valente, &lt;Monorepos: A Multivocal Literature Review&gt;, 6th Brazilian Workshop on Software Visualization, Evolution and Maintenance (VEM), 2018. p.1.</li>
</ol>
<p><strong>웹사이트</strong></p>
<ul>
<li>Monorepo Advantages, Wikipedia, <a href="https://en.wikipedia.org/wiki/Monorepo#Advantages" target="_blank" rel="nofollow">https:// en.wikipedia.org/wiki/Monorepo#Advantages</a> 참조. (2019.07.12)</li>
<li>Trouble importing project in lerna, stack overflow, <a href="https://stackoverflow.com/questions/52119818/trouble-importing-project-in-lerna" target="_blank" rel="nofollow">https:// stackoverflow.com/questions/52119818/trouble-importing-project-in-lerna</a> 참조. (2019.07.12)</li>
<li>View Git Patch Files In Color With This Script, malloc.co, <a href="http://www.malloc.co/git/view-git-patch-files-in-color-with-this-script/" target="_blank" rel="nofollow">http:// www.malloc.co/git/view-git-patch-files-in-color-with-this-script/</a> 참조. (2019.07.12)</li>
<li>Ignore white space in code review, The GitHub Blog, <a href="https://github.blog/2018-05-01-ignore-white-space-in-code-review/" target="_blank" rel="nofollow">https:// github.blog/2018-05-01-ignore-white-space-in-code-review/</a> 참조. (2019.07.12)</li>
</ul></div><div class="post__PostFooter-sc-1sfv28x-6 gEKJQZ"><a class="post__PostNavigator-sc-1sfv28x-7 lhRAoc" href="/ko/blog/2019/07/16/lama"><p class="post__PostNavigatorTitle-sc-1sfv28x-8 dBDefs"><span>다음 글</span><br/><b>Python 서버 개발자 관점에서 본 TypeScript, JavaScript</b></p><span class="Img__ImageContainer-sc-1rnm859-0 hMWwcz"><img src="/images/thumbnails/typescript.png" class="Img__Image-sc-1rnm859-1 fpURgw"/></span></a></div></div></div></div><div class="sc-hZSUBg bwAdMP"><div class="sc-bsbRJL DNFnA"><div class="Bio__BioContainer-sc-155qmyt-0 iDegNP"><img src="/images/profiles/tony.png" class="Bio__BioImage-sc-155qmyt-1 lcDDZr"/><div class="Bio__BioBody-sc-155qmyt-2 fsJRzA"><a class="Bio__Username-sc-155qmyt-3 jSkpUy" href="/ko/authors/tony">토니</a><div class="sc-bdVaJa hBKkTB">가리지 않고 배우는 개발자 한건호입니다.</div><a href="https://blog.geonho.com/" target="_blank" class="Bio__SocialIcon-sc-155qmyt-4 wZbtm"><img src="/images/blog-64x64.png" alt="blog"/></a><a href="https://github.com/hrg921" target="_blank" class="Bio__SocialIcon-sc-155qmyt-4 wZbtm"><img src="/images/github-64x64.png" alt="github"/></a><a href="https://www.linkedin.com/in/%EA%B1%B4%ED%98%B8-%ED%95%9C-76a139b1/" target="_blank" class="Bio__SocialIcon-sc-155qmyt-4 wZbtm"><img src="/images/linkedin-64x64.png" alt="linkedin"/></a></div></div></div></div><div class="sc-hZSUBg bwAdMP"><div class="sc-bsbRJL DNFnA"><div class="Comments__CommentsContainer-sc-1631qqa-0 ckhzBz"><div id="disqus_thread"></div></div></div></div></div></main><footer class="Footer__Container-sc-1vg27dx-0 fGQKSY"><div class="sc-cMhqgX kUFcze"><div class="sc-hZSUBg bwAdMP"><div class="sc-bsbRJL DNFnA"><img src="/images/logotype-black.png" alt="class101" class="Footer__LogoIcon-sc-1vg27dx-1 egeTSP"/><div class="Footer__ContactSection-sc-1vg27dx-3 NxmbO"><div class="Footer__ContactArticle-sc-1vg27dx-4 lCGJW"><b>클래스101 기술 블로그</b><p>서울특별시 중구 한강대로 416 서울스퀘어 13층</p><p>457-81-00277</p><p><a href="mailto:helloworld@class101.net">helloworld@class101.net</a></p></div><div class="Footer__ContactArticle-sc-1vg27dx-4 lCGJW"><a href="https://play.google.com/store/apps/details?id=net.pedaling.class101" target="_blank"><img src="/images/download-android.png" alt="android" class="Footer__DownloadIcon-sc-1vg27dx-2 cICPMT"/></a><a href="https://apps.apple.com/kr/app/class101-%ED%81%B4%EB%9E%98%EC%8A%A4101/id1320607634" target="_blank"><img src="/images/download-ios.png" alt="ios" class="Footer__DownloadIcon-sc-1vg27dx-2 cICPMT"/></a></div></div></div></div></div></footer></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-64561335-30', 'auto', {});
      
      
      
      }
      </script><script>window.fbAsyncInit = function() {
  FB.init({
    appId      : 2582489538450547,
    cookie     : false,
    version    : 'v3.3',
    xfbml      : true,
  });

  FB.AppEvents.logPageView();
};

(function(d, s, id){
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "https://connect.facebook.net/ko/sdk.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/ko/blog/2019/07/12/tony/";window.webpackCompilationHash="09d7e63a8118b38f087c";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-b7ff6590f9bf92da68bc.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-2943ec6c106b997945c2.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-c94eddf0fc3c3e8c57cc.js"],"component---src-templates-posts-tsx":["/component---src-templates-posts-tsx-58b8fdaffcba4d0abd0e.js"],"component---src-templates-tag-tsx":["/component---src-templates-tag-tsx-e687348ceb8f3840f636.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-39f47530f007239ad737.js"],"component---src-templates-authors-tsx":["/component---src-templates-authors-tsx-49bf4197305a96e7f23f.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-78694ff6c59444c2c033.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-791567499624305546b5.js"]};/*]]>*/</script><script src="/webpack-runtime-fc9784a1e968cce5c8b8.js" async=""></script><script src="/styles-672d624a319f9e44eab1.js" async=""></script><script src="/app-b7ff6590f9bf92da68bc.js" async=""></script><script src="/0-9da074a2ae788350ccf5.js" async=""></script><script src="/12-363ce47a5cc4cb526ffe.js" async=""></script><script src="/component---src-templates-post-tsx-c94eddf0fc3c3e8c57cc.js" async=""></script></body></html>